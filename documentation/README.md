# DungeonForge

## Зміст
- [Склад команди](#склад-команди)
- [Загальні положення](#1-загальні-положення)
- [Функціональні вимоги](#42-функціональні-вимоги)
- [Нефукціональні вимоги](#43-нефункціональні-вимоги)
- [System behavior](#system-behavior-для-dnd-додатку)
- [Опис API](#api)

## Склад команди:
- Андрусяк Ілля - ІПЗ-31
- Дунець Тарас - ІПЗ-31

## Технічне завдання
### 1. Загальні положення:
#### 1.1 Найменування роботи: 
Застосунок для ведення настільних RPG.
#### 1.2 	Умовне позначення: 
DungeonForge.
#### 1.3	Найменування замовника та розробників: 
Замовник - Юрій Яновський, розробники - студенти групи ІПЗ-31 Андрусяк Ілля та Дунець Тарас.
#### 1.4 Терміни: 
01.06.2025.

### 2. Призначення системи:
 Автоматизація та спрощення процесу управління персонажами, квестами, світом і бойовими механіками в настільних рольових іграх, забезпечуючи зручний інтерфейс для ведення кампаній, кидків кубиків, інтерактивних карт і збереження прогресу.
 
### 3. Об’єкти даних:
Вся інформація надається з клавіатури, система оперує такими об’єктами даних: персонажі (ім'я, характеристики, рівень, досвід, інвентар, навички), квести (опис, статус, нагороди), світ (локації, NPC, події), бойові дії (ініціатива, стани, пошкодження) та результати кидків кубиків.

### 4. Вимоги до програмного забезпечення:
#### 4.1 Структура програми:
Файли вихідного коду, виконавчий файл.
#### 4.2 Функціональні вимоги:
F1: 	Створення персонажа. \
F2: 	Видалення персонажа. \
F3: 	Редагування персонажа.\
F4: 	Зберігання параметрів персонажа (характеристики, особистість).\
F5: 	Управління інвентарем персонажа.\
F6: 	Ведення журналу квестів та подій.\
F7: 	Кидки кубів (d4, d6, d8, d10, d12, d20, d100) в потрібній кількості і з потрібними модифікаторами.\
F8: 	Автоматичний підрахунок бонусів та штрафів для кидків кубиків.\
F9: 	Журнал результатів кидків.\
F10:	Збереження інформації про локації, NPC та сюжетні лінії.\
F11:	Додавання та редагування власних правил і подій.\
F12:	Відстеження стану партії (здоров'я, статуси, ресурси).\
F13:	Завантаження або створення власних карт і туман війни.\
F14:	Відстеження, обмеження руху персонажів.\
F15:	Масштабування та переміщення карти.\
F16:	Візуалізація ініціативи та черги ходів.\
F17:	Відстеження станів (оглушення, отруєння тощо).\
F18:	Автоматичний підрахунок пошкоджень та зцілення.\
F19:	Локальне збереження прогресу.\
F20:	Можливість резервного копіювання в хмару.\
F21:	Імпорт/експорт даних персонажа та кампанії.\
F22:	Налаштування правил під власні системи.\
F23:	Теми оформлення (світла/темна).\
F24:	Підтримка кількох мов.\
F25: 	Онлайн-кампанії з іншими гравцями.\
F26:	Синхронізація стану партії в реальному часі.\
F27:	Автоматичне створення NPC та локацій.\
F28:	Генератор випадкових подій.\
F29:	Створення випадкових предметів і квестів.\
#### 4.3 Нефункціональні вимоги:
NF1: Система повинна мати зручний та інтуїтивно зрозумілий інтерфейс. \
NF2: Час відгуку на дії користувача не повинен перевищувати 1 секунди. \
NF3: Дані про персонажів, квести та інші об'єкти мають зберігатися у захищеному форматі.\
NF4: Система повинна підтримувати локальне та хмарне збереження даних.\
NF5: Можливість кастомізації правил гри без модифікації вихідного коду.\
NF6: Система повинна працювати на Windows, macOS та мобільних пристроях.\
NF7: Програма має забезпечувати резервне копіювання даних.\
NF8: Система повинна коректно працювати при одночасному доступі декількох користувачів.

## System Behavior для DnD-додатку 
### 1. Управління персонажем (Character Management)
Створення нового персонажа
- Ініціація: Користувач натискає "Створити персонажа".
- Введення даних: Додаток запитує основну інформацію: ім'я, расу, клас, рівень, фонові особливості. При виборі класу автоматично підтягуються відповідні здібності (Spellcasting, Rage тощо).
- Валідація: Додаток перевіряє коректність даних (наприклад, показник характеристик не може бути <3 або >20).
- Збереження: Додаток створює запис у локальній базі (Room/Firestore) з даними персонажа. Відображається екран детального перегляду персонажа.
Оновлення характеристик персонажа
- Ініціація: Користувач натискає на характеристику (наприклад, "Сила").
- Введення змін: Додаток дозволяє підвищувати/знижувати значення з обліком модифікаторів.
- Перерахунок: Автоматичне оновлення похідних значень (Клас Броні, ініціатива, модифікатори навичок).
- Збереження: Оновлені дані синхронізуються в локальній базі та (опціонально) в хмарі.

### 2. Кидки кубиків (Dice Rolls)
Звичайний кидок кубика
- Ініціація: Користувач обирає кубик (наприклад, d20) та натискає "Кинути".
- Логіка кидка: Додаток використовує Random() для генерації випадкового числа в межах (1…N).
- Облік умов: Якщо є перевага/недолік (advantage/disadvantage), генеруються два кидки, і береться більший/менший результат.
- Відображення: Додаток показує розгорнутий результат (наприклад, 17 + 3 (модифікатор) = 20).
Автоматизований рятівний кидок (Saving Throw)
- Ініціація: Користувач обирає тип рятівного кидка (наприклад, "Спритність").
- Валідація: Додаток перевіряє, чи є у персонажа майстерність (proficiency) у цій навичці.
- Розрахунок: Виконується кидок 1d20 + Модифікатор + Бонус майстерності (якщо є).
- Результат: Додаток відображає, чи пройшов персонаж перевірку (успіх/невдача).

### 3. Заклинання та Магія (Spellcasting)
Вибір та підготовка заклинань
- Ініціація: Користувач переходить у вкладку "Заклинання".
- Фільтрація: Додаток дозволяє шукати заклинання за назвою, рівнем або школою магії.
- Додавання заклинань: Дозволено додавати заклинання відповідно до рівня та класу персонажа.
- Оновлення слотів: Використання заклинання зменшує відповідний чар-слот.
Використання заклинань
- Ініціація: Користувач натискає на підготовлене заклинання.
- Розрахунок: Додаток виконує потрібний кидок (Spell Attack або Saving Throw).
- Оновлення: Зменшується доступний слот та відображається результат кидка.

### 4. Інтерактивна карта (Interactive Map)
Додавання та перегляд карти
- Ініціація: DM завантажує зображення карти або створює сітку (grid).
- Маркування: Додаток дозволяє додавати маркери (міста, підземелля, локації).
- Рух персонажів: DM може перетягувати персонажів по карті.
- Fog of War: Додаток дозволяє приховувати області карти для гравців.

### 5. Бойова Система (Combat System)
Відстеження ініціативи (Initiative Tracker)
- Ініціація: Гравці та NPC здійснюють кидок ініціативи (1d20 + Модифікатор).
- Сортування: Додаток автоматично впорядковує учасників за результатами кидків.
- Відстеження ходів: Після кожного ходу система автоматично переходить до наступного учасника.
Автоматизація бою
- Ініціація атаки: Гравець вибирає дію (атака, заклинання тощо).
- Кидок атаки: Додаток виконує 1d20 + Модифікатор.
- Визначення влучання: Порівнюється результат із Класом Броні (AC) цілі.
- Розрахунок шкоди: Успішна атака виконує кидок для шкоди (наприклад, 2d6 + STR).

### 6. Синхронізація та Резервне Копіювання
Синхронізація даних
- Ініціація: Користувач підключає Google Drive або Dropbox.
- Копіювання: Додаток створює JSON-файли персонажів та кампаній.
- Автоматичне оновлення: Після змін у даних виконується фонове оновлення резервної копії.

## API:
### 1. Авторизація та автентифікація
> POST /login/
- Опис: Аутентифікація користувача для входу в систему.
- Тіло запиту:
```json
{
  "username": "user_name",
  "password": "password"
}
```
-  Відповідь:
```json
{
  "access_token": "your_access_token",
  "token_type": "bearer"
}
```
> POST /register/
- Опис: Реєстрація нового користувача.
- Тіло запиту:
```json
{
  "username": "user_name",
  "password": "password",
  "email": "email@example.com"
}
```
- Відповідь:
```json
{
  "message": "User registered successfully"
}
```
### 2. Персонажі
> POST /characters/
- Опис: Створення нового персонажа.
- Тіло запиту:
```json
{
  "name": "Character Name",
  "class": "Warrior",
  "race": "Human",
  "stats": {
    "strength": 10,
    "dexterity": 12,
    "constitution": 14,
    "intelligence": 8,
    "wisdom": 10,
    "charisma": 14
  },
  "inventory": [],
  "skills": ["Athletics", "Survival"]
}
```
- Відповідь:
```json
{
  "message": "Character created successfully",
  "character_id": 12345
}
```
> GET /characters/{character_id}/
- Опис: Отримання інформації про персонажа за його ідентифікатором.
- Відповідь:
```json
{
  "name": "Character Name",
  "class": "Warrior",
  "race": "Human",
  "stats": {
    "strength": 10,
    "dexterity": 12,
    "constitution": 14,
    "intelligence": 8,
    "wisdom": 10,
    "charisma": 14
  },
  "inventory": [],
  "skills": ["Athletics", "Survival"]
}
```
> PUT /characters/{character_id}/
- Опис: Оновлення інформації про персонажа (наприклад, зміна характеристик, інвентаря тощо).
- Тіло запиту:
```json
{
  "name": "Updated Character Name",
  "class": "Mage",
  "inventory": ["Magic Wand", "Spell Book"]
}
```
- Відповідь:
```json
{
  "message": "Character updated successfully"
}
```
### 3. Гра (Для ГМ)
> POST /games/
- Опис: Створення нової гри (наприклад, кампанії).
- Тіло запиту:
```json
{
  "game_name": "Dungeon Adventure",
  "description": "Epic adventure in a dark dungeon",
  "gm_id": 1
}
```
- Відповідь:
```json
{
  "message": "Game created successfully",
  "game_id": 67890
}
```
> GET /games/{game_id}/
- Опис: Отримання інформації про гру, включаючи статус, учасників, карту та інші дані.
- Відповідь:
```json
{
  "game_name": "Dungeon Adventure",
  "description": "Epic adventure in a dark dungeon",
  "gm_id": 1,
  "players": ["Player1", "Player2"],
  "map": "map_url_or_object",
  "status": "In Progress"
}
```
> POST /games/{game_id}/start/
- Опис: Початок гри або кампанії.
- Відповідь:
```json
{
  "message": "Game started successfully... Finally"
}
```
> POST /games/{game_id}/end/
- Опис: Завершення гри.
- Відповідь:
```json
{
  "message": "Game ended successfully! Gontratulations!!!"
}
```
### 4. Ініціатива та Бій
> POST /combat/{game_id}/start/
- Опис: Початок бою в грі.
- Тіло запиту:
```json
{
  "turn_order": ["Player1", "Player2", "NPC1", "NPC2"]
}
```
Відповідь:
```json
{
  "message": "Combat started successfully"
}
```
> POST /combat/{game_id}/turn/
- Опис: Оновлення черги ходів (ініціатива).
- Тіло запиту:
```json
{
  "current_turn": "Player1"
}
```
- Відповідь:
```json
{
  "message": "Turn updated successfully"
}
```
> POST /combat/{game_id}/action/
- Опис: Виконання дії в бою (атака, використання зілля, тощо).
- Тіло запиту:
```json
{
  "action_type": "attack",
  "attacker": "Player1",
  "target": "Enemy1",
  "damage": 10
}
```
- Відповідь:
```json
{
  "message": "Action executed successfully"
}
```
### 5. Заклинання та ефекти
> GET /spells/
- Опис: Отримання списку всіх доступних заклинань.
- Відповідь:
```json
[
  {
    "name": "Fireball",
    "description": "Deals fire damage to all enemies in area",
    "level": 3
  },
  {
    "name": "Heal",
    "description": "Restores health to a friendly target",
    "level": 1
  }
]
```
> POST /spells/cast/
- Опис: Виконання заклинання.
- Тіло запиту:
```json
{
  "spell_name": "Fireball",
  "caster": "Player1",
  "targets": ["Enemy1", "Enemy2"],
  "damage": 25
}
```
- Відповідь:
```json
{
  "message": "Spell cast successfully"
}
```
### 6. Зберігання та налаштування
> POST /settings/
- Опис: Оновлення налаштувань гри (мова, тема, тощо).
- Тіло запиту:
```json
{
  "language": "uk",
  "theme": "dark"
}
```
- Відповідь:
```json
{
  "message": "Settings updated successfully"
}
```
> POST /save/
- Опис: Збереження прогресу гри в хмарі.
- Тіло запиту:
```json
{
  "game_id": 67890,
  "progress": "game_state_object"
}
```
- Відповідь:
```json
{
  "message": "Progress saved successfully"
}
```
### 7. Інші корисні ендпоінти
> GET /players/{player_id}/
- Опис: Отримання інформації про гравця.
- Відповідь:
```json
{
  "username": "Player1",
  "email": "player1@example.com",
  "character": "Character Name",
  "status": "Active"
}
```
